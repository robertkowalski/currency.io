this.JSON||(this.JSON||(this.JSON={}),function(){function a(a){return 10>a?"0"+a:a}function b(a){k.lastIndex=0;return k.test(a)?'"'+a.replace(k,function(a){var c=r[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,f){var g,e,m,k,q=h,l,d=f[a];d&&"object"===typeof d&&"function"===typeof d.toJSON&&(d=d.toJSON(a));"function"===typeof n&&(d=n.call(f,a,d));switch(typeof d){case "string":return b(d);case "number":return isFinite(d)?String(d):
"null";case "boolean":case "null":return String(d);case "object":if(!d)return"null";h+=p;l=[];if("[object Array]"===Object.prototype.toString.apply(d)){k=d.length;for(g=0;g<k;g+=1)l[g]=c(g,d)||"null";m=0===l.length?"[]":h?"[\n"+h+l.join(",\n"+h)+"\n"+q+"]":"["+l.join(",")+"]";h=q;return m}if(n&&"object"===typeof n)for(k=n.length,g=0;g<k;g+=1)e=n[g],"string"===typeof e&&(m=c(e,d))&&l.push(b(e)+(h?": ":":")+m);else for(e in d)Object.hasOwnProperty.call(d,e)&&(m=c(e,d))&&l.push(b(e)+(h?": ":":")+m);
m=0===l.length?"{}":h?"{\n"+h+l.join(",\n"+h)+"\n"+q+"}":"{"+l.join(",")+"}";h=q;return m}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(c){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
k=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,p,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,g){var e;p=h="";if("number"===typeof g)for(e=0;e<g;e+=1)p+=" ";else"string"===typeof g&&(p=g);if((n=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return c("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,c){function b(a,e){var f,k,d=a[e];if(d&&"object"===typeof d)for(f in d)Object.hasOwnProperty.call(d,f)&&(k=b(d,f),void 0!==k?d[f]=k:delete d[f]);return c.call(a,e,d)}var e;a=String(a);f.lastIndex=0;f.test(a)&&(a=a.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof c?b({"":e},""):e;throw new SyntaxError("JSON.parse");})}());String.prototype.count=function(a){return this.split(a).length};var currencies=JSON.stringify({USD:{name:"US Dollar",symbol:"$",rate_usd:1},EUR:{name:"Euro",symbol:"\u20ac",rate_usd:1},MMK:{name:"Myanmar Kyan",symbol:"M",rate_usd:1}});localStorage.currencies&&localStorage.currencies.count(":")===currencies.count(":")||(localStorage.currencies=currencies,localStorage.from_to='{ "from": "EUR", "to": "MMK" }');window.currencies=JSON.parse(localStorage.currencies);window.from_to=JSON.parse(localStorage.from_to);Object.prototype.touch=function(a){var b;window.Touch?(this.addEventListener("touchstart",function(a){a.preventDefault();!a.touches||1<a.touches.length||(b=this,addClass(this,"touched"))},!1),window.addEventListener("touchend",function(a){b&&removeClass(b,"touched")}),this.addEventListener("touchend",function(b){b.preventDefault();a&&a.apply(this,[b])},!1)):this.addEventListener("click",a)};
var addClass=function(a,b){RegExp("(\\s|^)"+b+"(\\s|$)").test(a.className)||(a.className+=" "+b)},removeClass=function(a,b){a.className=a.className.replace(RegExp("(\\s|^)"+b+"(\\s|$)")," ")},$=function(a,b){b=b||document;var c=b.querySelectorAll(a);return 1<c.length?c:c[0]},Converter={draw_currencies:function(){var a="",b=window.currencies,c;for(c in b)window.currencies.hasOwnProperty(c)&&(a+="<li>",a+='<a href="#" id="from-'+c+'">&nbsp;</a>',a+="<em>"+b[c].symbol+"</em> "+b[c].name+" <em>("+c+")</em>",
a+='<a href="#" id="to-'+c+'">&nbsp;</a>',a+="</li>");$("#rate-selection ul").innerHTML=a},highlight_currencies:function(a,b){window.from_to.from=a;window.from_to.to=b;localStorage.from_to=JSON.stringify(window.from_to);for(var c=0,f=rates.length;c<f;c++)rates[c].className="";$("#from-"+a).className="selected";$("#to-"+b).className="selected"},update_currency_display:function(a,b){a=a||window.from_to.from;b=b||window.from_to.to;var c=window.currencies[a],f=window.currencies[b];this.highlight_currencies(a,
b);Calculator.rate=1/f.rate_usd*c.rate_usd;$("#input h2").innerHTML="<em>"+c.symbol+"</em> "+c.name;$("#output h2").innerHTML="<em>"+f.symbol+"</em> "+f.name;html=a+" <em>&rarr;</em> "+b;$("#rates span").innerHTML=html;Calculator.add("")},update_rates:function(){if(navigator.onLine){var a=[],b;for(b in window.currencies)window.currencies.hasOwnProperty(b)&&a.push(b);var c=new XMLHttpRequest;c.open("POST","/exchange?currencies="+a.toString(),!0);c.send(null);c.onreadystatechange=function(){if(4===
c.readyState)if(200==this.status){var a=JSON.parse(c.responseText),b;for(b in a)a.hasOwnProperty(b)&&"USD"!==b&&(window.currencies[b].rate_usd=a[b]);localStorage.currencies=JSON.stringify(window.currencies);Converter.update_currency_display()}else console.error("Request failed.")}}}},Calculator={input:$("#input h1"),output:$("#output h1"),rate:0,add:function(a){var b="0"!==this.input.innerText?this.strip_commas(this.input.innerText):"";this.update_values(b+a)},update_values:function(a){a=a?this.strip_commas(a):
0;var b=isNaN(a)?"0.00":(a*this.rate).toFixed(2);9<a.length||9<b.length||(this.input.innerHTML=this.add_commas(a),this.output.innerHTML=this.add_commas(b))},clear:function(){this.update_values("0")},add_commas:function(a){var b=/(\d+)(\d{3,3})/,c=(""+a).split(".");a=c[0];for(c=void 0!==c[1]?"."+c[1]:"";b.test(a);)a=a.replace(b,"$1,$2");return a+c},strip_commas:function(a){return a.replace(/,/g,"")}};
if(void 0===navigator.standalone||navigator.standalone){navigator.userAgent.match(/Android/i)&&window.addEventListener("load",function(){window.scrollTo(0,1)},!1);$("#wrapper").style.display="block";$("#install").style.display="none";for(var buttons=$("#input-pad p"),i=0,ii=buttons.length;i<ii;i++)buttons[i].id.length||buttons[i].touch(function(){Calculator.add(this.innerText)});$("#clear").touch(function(a){Calculator.clear()});$("#input").touch(function(a){addClass($("body"),"edit-rates-from")});
$("#output").touch(function(a){addClass($("body"),"edit-rates-to")});$("#flip").touch(function(a){addClass($("body"),"flip");setTimeout(function(){Converter.update_currency_display(window.from_to.to,window.from_to.from);(9<=Calculator.input.innerHTML.length||9<=Calculator.output.innerHTML.length)&&Calculator.clear()},130);setTimeout(function(){removeClass($("body"),"flip")},275)});Converter.draw_currencies();for(var rates=$("#rate-selection a"),i=0,ii=rates.length;i<ii;i++)rates[i].touch(function(a){a.preventDefault();
a=this.id.split("-");args="from"==a[0]?[a[1],null]:[null,a[1]];Converter.update_currency_display.apply(Converter,args);Calculator.clear();removeClass($("body"),"edit-rates-\\w+")});var detectOrientation=function(){window.orientation?addClass($("body"),"credits"):removeClass($("body"),"credits")};detectOrientation();window.addEventListener("orientationchange",detectOrientation);navigator.onLine||($("#network-status").className="offline");Converter.update_currency_display();setTimeout(function(){Converter.update_rates()},
100);window.applicationCache.addEventListener("updateready",function(){window.applicationCache.swapCache()},!1)}else $("#wrapper").style.display="none",$("#install").style.display="block";
